{% extends "base1.html" %}

{% block content %}

lita de ids: {{ listaDeIds }}
<button id="botonAvanzar">Avanzar</button>

<button id="botonRetroceder">Retroceder</button>

<div id="id1">

<h1>Autor: {{ autor }} <span style="font-family: Arial; font-size: 18px; color: blue;">(autor.id:{{ autor.id }})</span></h1>
  <p><strong>{{ autor.nacimiento }} - {{ autor.muerte }}</p>

  <div style="margin-left:20px;margin-top:20px">
    <h4>Libros</h4> 
    {% for libro in autor.libro_set.all %}
    <hr>
    <p class="text-success"><a href="{{ libro.get_absolute_url }}">{{ libro }}</a> (libro.id:{{ libro.id }})</p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-weight: normal;">{{ libro.descripcion }}</p>
    {% endfor %}
  </div>
</div>

<script>
// Guardar un dato (igual que localStorage, pero solo para la sesión actual)
//sessionStorage.setItem('posicionActual', 0);
const listaIdsAutores = {{ listaDeIds }};
const ultIdEnListIdsAutores = listaIdsAutores.length-1;
const avanzar = document.getElementById('botonAvanzar');
const retroceder = document.getElementById('botonRetroceder');
const posicionRec={{ posicionEnv }}

avanzar.addEventListener('click', function() {
  let nuevaPosicion = posicionRec+1;
  if (nuevaPosicion <= ultIdEnListIdsAutores) {
  let url = "{% url 'navAutorYsusLibJS' %}?posicionEnviada=1".replace('1', nuevaPosicion);
  //Redirige al navegador a esa URL
  window.location.href = url;} 
  else {
  alert('Mi pana, este es el último, no hay más autores.');
}
  
});

retroceder.addEventListener('click', function() {
  //Note como guardar valores persistentemente en una sesión como se hacía en la versión anterior:
  //let posicion = sessionStorage.getItem('posicionActual');
  //sessionStorage.setItem('posicionActual', --posicion);
  //alert('posicion: ' + posicion + ' id: ' + listaIdsAutores[posicion]);
  let nuevaPosicion = posicionRec-1;
  if (nuevaPosicion >= 0) {
  let url = "{% url 'navAutorYsusLibJS' %}?posicionEnviada=1".replace('1', nuevaPosicion);
  //Redirige al navegador a esa URL
  window.location.href = url;} 
  else {
  alert('Mi pana, este es el primer autor.');
}
});
</script>

{% endblock %}
