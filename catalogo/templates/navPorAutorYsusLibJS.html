{% extends "base1.html" %}

{% block content %}
<div>Navegar por autor y sus libros con JS y plantilla desde cero</div>
  <div>
      lita de ids: {{ listaDeIds }}
      <button id="botonAvanzar">Avanzar</button>
      <button id="botonRetroceder">Retroceder</button>
  </div>
  <div>
      {% include "catalogo/baseAutorYsusLibros.html" %}
  </div>
</div>

<script>
// Guardar un dato (igual que localStorage, pero solo para la sesión actual)
//sessionStorage.setItem('posicionActual', 0);
const listaIdsAutores = {{ listaDeIds }};
const ultIdEnListIdsAutores = listaIdsAutores.length-1;
const avanzar = document.getElementById('botonAvanzar');
const retroceder = document.getElementById('botonRetroceder');
const posicionRec={{ posicionEnv }}

avanzar.addEventListener('click', function() {
  let nuevaPosicion = posicionRec+1;
  if (nuevaPosicion <= ultIdEnListIdsAutores) {
  let url = "{% url 'navAutorYsusLibJS' %}?posicionEnviada=1".replace('1', nuevaPosicion);
  //Redirige al navegador a esa URL
  window.location.href = url;} 
  else {
  alert('Mi pana, este es el último, no hay más autores.');
}
  
});

retroceder.addEventListener('click', function() {
  //Note como guardar valores persistentemente en una sesión como se hacía en la versión anterior:
  //let posicion = sessionStorage.getItem('posicionActual');
  //sessionStorage.setItem('posicionActual', --posicion);
  //alert('posicion: ' + posicion + ' id: ' + listaIdsAutores[posicion]);
  let nuevaPosicion = posicionRec-1;
  if (nuevaPosicion >= 0) {
  let url = "{% url 'navAutorYsusLibJS' %}?posicionEnviada=1".replace('1', nuevaPosicion);
  //Redirige al navegador a esa URL
  window.location.href = url;} 
  else {
  alert('Mi pana, este es el primer autor.');
}
});
</script>

{% endblock %}
