{% extends "base1.html" %}

{% block content %}

lita de ids: {{ listaDeIds }}
<button id="botonAvanzar">Avanzar</button>

<button id="botonRetroceder">Retroceder</button>

<div id="id1">

<h1>Autor: {{ autor }} <span style="font-family: Arial; font-size: 18px; color: blue;">(autor.id:{{ autor.id }})</span></h1>
  <p><strong>{{ autor.nacimiento }} - {{ autor.muerte }}</p>

  <div style="margin-left:20px;margin-top:20px">
    <h4>Libros</h4> 
    {% for libro in autor.libro_set.all %}
    <hr>
    <p class="text-success"><a href="{{ libro.get_absolute_url }}">{{ libro }}</a> (libro.id:{{ libro.id }})</p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-weight: normal;">{{ libro.descripcion }}</p>
    {% endfor %}
  </div>
</div>

<script>
// Guardar un dato (igual que localStorage, pero solo para la sesión actual)
sessionStorage.setItem('posicionActual', 0);
const listaIdsAutores = {{ listaDeIds }};
const avanzar = document.getElementById('botonAvanzar');
const retroceder = document.getElementById('botonRetroceder');
let posicion={{ posicionEnv }}
// 2. Añade un escuchador para el evento 'click'
avanzar.addEventListener('click', function() {
  // 3. Tu código JavaScript va aquí
  //let posicion = sessionStorage.getItem('posicionActual');
  let nuevaPosicion = ++posicion
  //sessionStorage.setItem('posicionActual', nuevaPosicion);
  //let pks=listaIdsAutores[posicion];
  //alert('posicion: ' + posicion + ' id: ' + listaIdsAutores[posicion]);
  let url = "{% url 'navAutorYsusLibJS' %}?posicionEnviada=1".replace('1', nuevaPosicion);
  //Redirige al navegador a esa URL
  window.location.href = url;
});

retroceder.addEventListener('click', function() {
  let nuevaPosicion = --posicion
  //let posicion = sessionStorage.getItem('posicionActual');
  //sessionStorage.setItem('posicionActual', --posicion);
  //alert('posicion: ' + posicion + ' id: ' + listaIdsAutores[posicion]);
  let url = "{% url 'navAutorYsusLibJS' %}?posicionEnviada=1".replace('1', nuevaPosicion);
  window.location.href = url;
});
</script>

{% endblock %}
